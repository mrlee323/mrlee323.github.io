---
layout: post
title: "TIL #85 final-project useSWR"
data: '2021-03-09'
category: [TIL]
---

어제 코멘트를 입력하고 다시 보여주는데 까지 지연시간이 걸렸는데 이 문제를 해결할 방법을 찾았다. 그방법중 하나가 useSWR이다. useSWR 기능을 보니 useSWR를 캐싱을해서 데이터를 가지고있다가 변경된 데이터에 대해서만 데이터 처리를 한다고 한다. 내가 딱 찾고 있던 방법이어서 공식문서에서 해당 기능을 어떻게 처리하는지 보고 mutate라는 기능을 통해서 일단 comment 입력되었을때 state를 변경해서 보여준후 post처리를 하는 것이었다. state가 변경되면 useSWR get을 통해 변경된 부분만 바로 보여지게 된다. 

이때 문제는 익명의 id님인데 id는 db에서 받아서 처리를 해야했기에 post 후에 다시 mutate로 state를 갱신하여 id를 보여주는 방식으로 처리했다. id가 뜨는데까지는 다소 시간이 걸리지만 코멘트는 등록하는 즉시 보여진다. 멈춰있는 느낌을 받지않아서 괜찮은 방법인것 같았다. 또한 useSWR을 사용하면 props로 데이터를 넘겨주지않고 각 컴포넌트에서 사용해도 캐싱으로 인해 중복으로 작동하지 않는다고 한다. 사용할때 props에 대한 걱정없이 문제를 처리했다. get하는 부분에 있어서 useSWR은 정말 유용한 기능인 듯 하다.

지금은 단순히 CSR로 AXIOS를 이용해서 GET,POST를 하고 있는데 입력을 했을때 입력한 데이터만 추가적으로 보여주는 방법이 없는지 찾아봐야겠다.