---
layout: post
title: "TIL #92 final-project 버그 찾기 && 사라지는 svg"
data: '2021-03-16'
category: [TIL]
---

### 버그 찾기
코드가 어느 정도 완성되어 각자의 기기로 테스팅을 진행했다. 팀장이 테스트용으로 배포한 주소를 가지고 각자 테스팅을 했는데 말도 안돼는 부분에서 오류가 생겼다.

우선 가장 큰 오류는 아이폰에서만 발생하는 input 사이즈 오류이다. 다른 기기들은 괜찮은데 아이폰에서만 input에서 줄바꿈이 생겼다. 아무래도 아이폰에만 input에 margin이나 padding이 추가적으로 적용이 되는 부분이 있는 것 같다. 이제와서 input을 css reset을 설정하기는 너무 많은 부분이 변경될 것같아. 아이폰에서 적용되는 input css만 reset을 적용하기로 결정했다. 

다음 오류는 내가 진행한페이지에서 로직이 진행 될때마다 step을 표시하는 svg가 있었는데 마지막 로직에서 step component가 통째로 사라졌다. 이부분도 모두가 같은 현상이 일어나는 것은 아니었다. 그러다 보니 무슨 문제인지 감이 안잡힌다. 일단 컴포넌트를 하나하나 뜯어보면서 정리해야 할듯 하다.

그외에도 UI적으로 겹치기도 하는 부분도 있고 코멘트를 작성했는데 코멘트 count를 나타내는 부분이 변경되지않는등 완성됐다고 생각했는데 너무 생각지도 않은 부분에서 버그들이 발생하니 당황 스러웠다. 하나하나 버그를 잡고 다시 테스팅 하기로 했다. 

## 사라지는 svg
도데체 왜 사라질까? 아무리 뜯어 봐도 잘모르겠다. 뭔가 state에 따라 보여지는 svg로직에서 어딘가 맞지 않아 사라지는 것같은데 state변경을 console로 찍어봐도 state값은 잘 맞는다. 근데 svg가 왜 사라지는 걸까?
솔직히 근본적인 이유를 찾지는 못했다. 어떠한 로직으로 인해 사라진다! 라는 건 알 수 없었고, 프로젝트 마감은 얼마 남지 않았기에 svg를 수정하기로 결정했다.

일단 svg를 Circle이라는 컴포넌트로 각 넘버를 만들어서 사용했던 부분을 각 svg를 다운받아 파일을 추가해서 사용하고 각 svg를 한파일에서 작업하지않고 각 컴포넌트로 분리해서 적용했다. 

```js
function One({ next, Width }) {
  return (
    ...
      {!next ? <OneDefault width={Width} /> : <Check width={Width} />}
    ...
  );
}
```

이렇게 컴포넌트를 만들어서 step 컴포넌트 안에서 합쳐서 사용했다. 개발환경에서 발생하지 않는 버그라서 계속 빌드를 해가면서 테스트를 했다. 최종적으로 이방법을 사용하고 마지막 버그를 잡을 수 있었다. 버그 해결을 둘째치고 왜 사라지는지 모르니 조금 답답하다. 분명 내가 생각지 못한 실행 로직으로 인해 발생할텐데 이게 개발 환경에서는 발생하지않고 그것도 특정 기기에서만 발생하니 해결을 했지만 원인에 대한 해결이 아니라 아쉽다. 
