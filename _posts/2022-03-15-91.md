---
layout: post
title: "TIL #91 final-project code refactoring"
data: '2021-03-15'
category: [TIL]
---

오늘 코드 리팩토링을 했다. 멘토님이 내가 작성한 custom hook에서 너무 많은 로직을 처리한다고 하셔서 최대한 분리 하려고 했는데 멘토님의 설명을 간단하게 보였는데 막상 정리하려고 보니 쉽지 않았다. 멘토님의 의견을 충분히 이해가 갔다. 나의 useCommentInput에는 textarea에서 onChange로 받은 value부터 submit, validation까지 모두 들어있었다. 일단 textarea에서 받는 값과 등록으로 제출하는 부분을 분리 하기로 정하고 정리를 시작했다. 

useCommentInput이란 파일명에서 useCommentTextarea로 정하고 이 hook은 오직 textarea로 받는 value만 state로 관리했다. 그리고 useCommentSubmit이란 파일안에서 submit을 다루도록 분리했다. 이 과정에서 보니 validation으로 중복으로 사용되는 부분이 있어 이부부은 utils로 따로 만들어 import해서 사용했다. 이렇게 정리하니 코드들이 한결 간결해졌다. 로직이 정리되다보니 각 hook에서 어떤 로직을 처리하는지 훨씬 직관적으로 보였다.

이렇게 정리하고 보니 나의 코드는 구현하기에 급급한 코드들이 었던것 같다. textarea데이터를 받은 state가 필요해서 만들고 제출도 해야하니까 submit도 만들고 거기다 확인이 필요한 부분들이 있어 validation 부분도 추가하면서 코드는 점점 복잠해졌다. 정리하기전까지는 꽤 괜찮다고 생각했는데 지식이 짧았던 나의 오산이었다. 배우면 배울수록 더 어려워지는 것같다. 고려해야 할 점들이 늘어가고 그에 맞춰 코드를 작성해야 한다는게 쉽지 않은 것 같다. 거기다 이미 작성한 코드를 그에 맞춰 다시 정리하는 것은 더 어려운 것 같다. 처음 잘 작성한 코드들은 오히려 수정하기 쉬운 반면 마구잡이로 작성한 코드는 어디를 잘라서 분리해야하는지 여기에 어떤 로직이 엮여있는지 분명하지 않아 생각이 많았던 것 같다. 그만큼 처음에 코드를 작성할때 로직에 대한 이해가 되어있어하고 코드들의 연관성을 고려하여 작성해야 좀더 독립적이고 의존성을 낮출수 있는 것 같다. 